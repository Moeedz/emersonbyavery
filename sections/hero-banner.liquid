{% comment %}
  Hero Banner Section â€” Emerson by Avery
  Premium Flow-Style Animations
  
  Features:
  - Split text headline animation
  - Staggered fade-up reveals
  - Floating heart with pulse
  - Sparkle animations
  - Scroll indicator
  - Mobile-first responsive
{% endcomment %}

{{ 'section-hero-banner.css' | asset_url | stylesheet_tag }}

<section 
  class="hero-banner" 
  data-section-id="{{ section.id }}"
  data-section-type="hero-banner"
  style="--hero-bg: {{ section.settings.bg_color }};"
>
  <div class="hero-banner__bg"></div>
  
  <div class="hero-banner__container">
    <!-- Content -->
    <div class="hero-banner__content">
      {%- if section.settings.eyebrow != blank -%}
        <span class="hero-banner__eyebrow" data-animate="fade-up">
          {{ section.settings.eyebrow }}
        </span>
      {%- endif -%}

      {%- if section.settings.heading != blank -%}
        <h1 class="hero-banner__title" data-animate="split-text">
          {%- assign words = section.settings.heading | split: ' ' -%}
          {%- for word in words -%}
            <span class="word"><span>{{ word }}</span></span>
          {%- endfor -%}
        </h1>
      {%- endif -%}

      {%- if section.settings.subheading != blank -%}
        <p class="hero-banner__subtitle" data-animate="fade-up" data-delay="2">
          {{ section.settings.subheading }}
        </p>
      {%- endif -%}

      <div class="hero-banner__ctas" data-animate="fade-up" data-delay="3">
        {%- if section.settings.primary_link != blank and section.settings.primary_text != blank -%}
          <a href="{{ section.settings.primary_link }}" class="btn btn--primary">
            <span>{{ section.settings.primary_text }}</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        {%- endif -%}

        {%- if section.settings.secondary_link != blank and section.settings.secondary_text != blank -%}
          <a href="{{ section.settings.secondary_link }}" class="btn btn--secondary">
            <span>{{ section.settings.secondary_text }}</span>
          </a>
        {%- endif -%}
      </div>
    </div>

    <!-- Visual -->
    <div class="hero-banner__visual" data-animate="scale-up" data-delay="1">
      <div class="hero-banner__image-wrapper">
        {%- if section.settings.hero_image != blank -%}
          <div class="hero-banner__image">
            {{
              section.settings.hero_image | image_url: width: 900 | image_tag:
              loading: 'eager',
              fetchpriority: 'high',
              sizes: '(min-width: 1024px) 450px, (min-width: 768px) 380px, 280px',
              widths: '280, 380, 450, 560, 760, 900',
              class: 'hero-banner__img'
            }}
          </div>
        {%- else -%}
          <!-- Animated Rainbow Heart SVG -->
          <div class="hero-banner__heart">
            <svg viewBox="0 0 200 200" class="heart-svg" aria-hidden="true">
              <defs>
                <linearGradient id="rainbow-gradient-{{ section.id }}" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#E85D75"/>
                  <stop offset="25%" stop-color="#F4976C"/>
                  <stop offset="50%" stop-color="#F4C542"/>
                  <stop offset="75%" stop-color="#9CB69C"/>
                  <stop offset="100%" stop-color="#6B9AC4"/>
                </linearGradient>
              </defs>
              <path 
                d="M100 180C60 140 20 110 20 70C20 40 45 20 75 20C90 20 100 35 100 35C100 35 110 20 125 20C155 20 180 40 180 70C180 110 140 140 100 180Z" 
                fill="url(#rainbow-gradient-{{ section.id }})"
                class="heart-path"
              />
            </svg>
          </div>
        {%- endif -%}

        <!-- Floating Sparkles -->
        <div class="hero-banner__sparkles" aria-hidden="true">
          <span class="sparkle sparkle--1">âœ¨</span>
          <span class="sparkle sparkle--2">ðŸ’–</span>
          <span class="sparkle sparkle--3">ðŸŒŸ</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll Indicator -->
  {%- if section.settings.show_scroll_indicator -%}
    <div class="hero-banner__scroll-indicator" data-animate="fade-up" data-delay="4">
      <span>{{ section.settings.scroll_text | default: 'Scroll to explore' }}</span>
      <div class="scroll-line">
        <div class="scroll-dot"></div>
      </div>
    </div>
  {%- endif -%}
</section>

<script>
  (function() {
    const section = document.querySelector('[data-section-id="{{ section.id }}"]');
    if (!section) return;

    // Intersection Observer for scroll animations
    const observerOptions = {
      threshold: 0.15,
      rootMargin: '0px 0px -80px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    // Observe all animated elements
    section.querySelectorAll('[data-animate]').forEach(el => {
      observer.observe(el);
    });

    // Trigger hero animations on load (above the fold)
    const triggerHeroAnimations = () => {
      setTimeout(() => {
        section.querySelectorAll('[data-animate]').forEach(el => {
          el.classList.add('is-visible');
        });
      }, 100);
    };

    if (document.readyState === 'complete') {
      triggerHeroAnimations();
    } else {
      window.addEventListener('load', triggerHeroAnimations);
    }
  })();
</script>

{% schema %}
{
  "name": "Hero Banner",
  "tag": "section",
  "class": "section-hero-banner",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow Text",
      "default": "Tiny Artist. Big Imagination."
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Art Made with Heart",
      "info": "Each word animates separately"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Every piece in our shop brings a slice of 7-year-old Avery's colorful world into yours."
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero Image",
      "info": "Recommended: 900x900px. Leave empty to show animated rainbow heart."
    },
    {
      "type": "header",
      "content": "Primary Button"
    },
    {
      "type": "text",
      "id": "primary_text",
      "label": "Button Text",
      "default": "Shop Collection"
    },
    {
      "type": "url",
      "id": "primary_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Secondary Button"
    },
    {
      "type": "text",
      "id": "secondary_text",
      "label": "Button Text",
      "default": "Meet Avery"
    },
    {
      "type": "url",
      "id": "secondary_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Scroll Indicator"
    },
    {
      "type": "checkbox",
      "id": "show_scroll_indicator",
      "label": "Show scroll indicator",
      "default": true
    },
    {
      "type": "text",
      "id": "scroll_text",
      "label": "Scroll Text",
      "default": "Scroll to explore"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#FDF9F6"
    }
  ],
  "presets": [
    {
      "name": "Hero Banner"
    }
  ]
}
{% endschema %}

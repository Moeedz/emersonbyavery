{% comment %}
  Hero Banner Section - Emerson by Avery
  "Refined Whimsy" Design System
{% endcomment %}

<section class="hero-banner" data-section-id="{{ section.id }}">
  <div class="hero-banner__container">
    <div class="hero-banner__content" data-reveal>
      {%- if section.settings.eyebrow != blank -%}
        <span class="hero-banner__eyebrow">{{ section.settings.eyebrow }}</span>
      {%- endif -%}

      {%- if section.settings.heading != blank -%}
        <h1 class="hero-banner__title">{{ section.settings.heading }}</h1>
      {%- endif -%}

      {%- if section.settings.subheading != blank -%}
        <p class="hero-banner__subtitle">{{ section.settings.subheading }}</p>
      {%- endif -%}

      <div class="hero-banner__ctas">
        {%- if section.settings.primary_link != blank and section.settings.primary_text != blank -%}
          <a href="{{ section.settings.primary_link }}" class="btn btn-primary">
            {{ section.settings.primary_text }}
          </a>
        {%- endif -%}

        {%- if section.settings.secondary_link != blank and section.settings.secondary_text != blank -%}
          <a href="{{ section.settings.secondary_link }}" class="btn btn-secondary">
            {{ section.settings.secondary_text }}
          </a>
        {%- endif -%}
      </div>
    </div>

    <div class="hero-banner__visual">
      <div class="hero-banner__image-wrapper">
        {%- if section.settings.hero_image != blank -%}
          <img
            src="{{ section.settings.hero_image | image_url: width: 800 }}"
            srcset="{{ section.settings.hero_image | image_url: width: 400 }} 400w,
                    {{ section.settings.hero_image | image_url: width: 600 }} 600w,
                    {{ section.settings.hero_image | image_url: width: 800 }} 800w"
            sizes="(min-width: 768px) 50vw, 100vw"
            alt="{{ section.settings.hero_image.alt | default: section.settings.heading }}"
            width="{{ section.settings.hero_image.width }}"
            height="{{ section.settings.hero_image.height }}"
            loading="eager"
            class="hero-banner__image"
          >
        {%- else -%}
          <!-- Animated Rainbow Heart SVG (Default/Placeholder) -->
          <div class="hero-banner__rainbow-heart">
            <svg viewBox="0 0 200 200" class="rainbow-heart-svg">
              <defs>
                <linearGradient id="rainbow-gradient-{{ section.id }}" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#E85D75"/>
                  <stop offset="25%" stop-color="#F4976C"/>
                  <stop offset="50%" stop-color="#F4C542"/>
                  <stop offset="75%" stop-color="#9CB69C"/>
                  <stop offset="100%" stop-color="#6B9AC4"/>
                </linearGradient>
              </defs>
              <path 
                d="M100 180C60 140 20 110 20 70C20 40 45 20 75 20C90 20 100 35 100 35C100 35 110 20 125 20C155 20 180 40 180 70C180 110 140 140 100 180Z" 
                fill="url(#rainbow-gradient-{{ section.id }})"
                class="heart-path"
              />
            </svg>
          </div>
        {%- endif -%}
      </div>

      <!-- Floating decorative elements -->
      <div class="hero-banner__doodles">
        <span class="doodle doodle-1">âœ¨</span>
        <span class="doodle doodle-2">ðŸŒŸ</span>
        <span class="doodle doodle-3">ðŸ’–</span>
      </div>
    </div>
  </div>
</section>

{% style %}
  /* ============================================
     HERO BANNER - Emerson by Avery
     ============================================ */

  .hero-banner {
    --color-primary: #E85D75;
    --color-primary-dark: #C94D63;
    --color-text: #1F1A14;
    --color-text-secondary: #756758;
    --color-cream: {{ section.settings.bg_color | default: '#FDF9F6' }};
    --font-heading: 'Fraunces', Georgia, serif;
    --font-body: 'DM Sans', system-ui, sans-serif;
    --font-accent: 'Caveat', cursive;
    --ease-out: cubic-bezier(0.16, 1, 0.3, 1);

    background-color: var(--color-cream);
    padding: 48px 16px;
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .hero-banner {
      padding: 80px 48px;
    }
  }

  @media (min-width: 1024px) {
    .hero-banner {
      padding: 80px 64px;
    }
  }

  /* Container */
  .hero-banner__container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 32px;
    max-width: 1440px;
    margin: 0 auto;
    align-items: center;
  }

  @media (min-width: 768px) {
    .hero-banner__container {
      grid-template-columns: 1fr 1fr;
      gap: 48px;
    }
  }

  @media (min-width: 1024px) {
    .hero-banner__container {
      gap: 64px;
    }
  }

  /* Content */
  .hero-banner__content {
    text-align: center;
    order: 2;
  }

  @media (min-width: 768px) {
    .hero-banner__content {
      text-align: left;
      order: 1;
    }
  }

  /* Eyebrow */
  .hero-banner__eyebrow {
    display: inline-block;
    font-family: var(--font-accent);
    font-size: 18px;
    color: var(--color-primary);
    margin-bottom: 12px;
  }

  @media (min-width: 768px) {
    .hero-banner__eyebrow {
      font-size: 20px;
      margin-bottom: 16px;
    }
  }

  @media (min-width: 1024px) {
    .hero-banner__eyebrow {
      font-size: 24px;
    }
  }

  /* Title */
  .hero-banner__title {
    font-family: var(--font-heading);
    font-size: 36px;
    font-weight: 400;
    line-height: 1.1;
    letter-spacing: -0.5px;
    color: var(--color-text);
    margin: 0 0 16px 0;
  }

  @media (min-width: 768px) {
    .hero-banner__title {
      font-size: 48px;
      letter-spacing: -1px;
      margin-bottom: 20px;
    }
  }

  @media (min-width: 1024px) {
    .hero-banner__title {
      font-size: 64px;
      margin-bottom: 24px;
    }
  }

  /* Subtitle */
  .hero-banner__subtitle {
    font-family: var(--font-body);
    font-size: 16px;
    line-height: 1.6;
    color: var(--color-text-secondary);
    margin: 0 auto 24px auto;
    max-width: 400px;
  }

  @media (min-width: 768px) {
    .hero-banner__subtitle {
      font-size: 17px;
      margin: 0 0 28px 0;
      max-width: none;
    }
  }

  @media (min-width: 1024px) {
    .hero-banner__subtitle {
      font-size: 18px;
      margin-bottom: 32px;
    }
  }

  /* CTAs */
  .hero-banner__ctas {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  @media (min-width: 768px) {
    .hero-banner__ctas {
      flex-direction: row;
      gap: 16px;
    }
  }

  /* Buttons */
  .hero-banner .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 16px 32px;
    font-family: var(--font-body);
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.7px;
    text-decoration: none;
    border-radius: 100px;
    cursor: pointer;
    transition: all 0.3s var(--ease-out);
    border: 2px solid transparent;
  }

  .hero-banner .btn-primary {
    background-color: var(--color-primary);
    color: #ffffff;
    border-color: var(--color-primary);
  }

  .hero-banner .btn-primary:hover {
    background-color: var(--color-primary-dark);
    border-color: var(--color-primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(232, 93, 117, 0.3);
  }

  .hero-banner .btn-secondary {
    background-color: transparent;
    color: var(--color-text);
    border-color: var(--color-text);
  }

  .hero-banner .btn-secondary:hover {
    background-color: var(--color-text);
    color: #ffffff;
  }

  /* Visual */
  .hero-banner__visual {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    order: 1;
  }

  @media (min-width: 768px) {
    .hero-banner__visual {
      order: 2;
    }
  }

  .hero-banner__image-wrapper {
    position: relative;
    width: 100%;
    max-width: 280px;
  }

  @media (min-width: 768px) {
    .hero-banner__image-wrapper {
      max-width: 350px;
    }
  }

  @media (min-width: 1024px) {
    .hero-banner__image-wrapper {
      max-width: 450px;
    }
  }

  .hero-banner__image {
    width: 100%;
    height: auto;
    display: block;
    animation: float 4s ease-in-out infinite;
  }

  /* Rainbow Heart SVG */
  .hero-banner__rainbow-heart {
    width: 100%;
    aspect-ratio: 1;
    animation: float 4s ease-in-out infinite;
  }

  .rainbow-heart-svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 20px 40px rgba(232, 93, 117, 0.3));
  }

  .heart-path {
    transform-origin: center;
    animation: pulse 2s ease-in-out infinite;
  }

  /* Floating Doodles */
  .hero-banner__doodles {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .doodle {
    position: absolute;
    font-size: 24px;
    animation: float 3s ease-in-out infinite;
  }

  @media (min-width: 768px) {
    .doodle {
      font-size: 28px;
    }
  }

  .doodle-1 {
    top: 5%;
    right: 5%;
    animation-delay: 0s;
  }

  .doodle-2 {
    bottom: 15%;
    left: 0%;
    animation-delay: -1s;
  }

  .doodle-3 {
    top: 40%;
    right: -5%;
    animation-delay: -2s;
  }

  /* Animations */
  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }

  /* Scroll Reveal */
  [data-reveal] {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s var(--ease-out), transform 0.6s var(--ease-out);
  }

  [data-reveal].is-visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .hero-banner__image,
    .hero-banner__rainbow-heart,
    .doodle,
    .heart-path {
      animation: none;
    }

    [data-reveal] {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
{% endstyle %}

<script>
  // Scroll Reveal Animation
  (function() {
    const revealElements = document.querySelectorAll('[data-section-id="{{ section.id }}"] [data-reveal]');
    
    if ('IntersectionObserver' in window) {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              observer.unobserve(entry.target);
            }
          });
        },
        {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px'
        }
      );

      revealElements.forEach((el) => observer.observe(el));
    } else {
      // Fallback for older browsers
      revealElements.forEach((el) => el.classList.add('is-visible'));
    }
  })();
</script>

{% schema %}
{
  "name": "Hero Banner",
  "tag": "section",
  "class": "section-hero-banner",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow Text",
      "default": "Tiny Artist. Big Imagination."
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Art Made with Heart"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Every piece in our shop brings a slice of 7-year-old Avery's colorful world into yours."
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero Image",
      "info": "Recommended: 800x800px. Leave empty to show animated rainbow heart."
    },
    {
      "type": "header",
      "content": "Primary Button"
    },
    {
      "type": "text",
      "id": "primary_text",
      "label": "Button Text",
      "default": "Shop Collection"
    },
    {
      "type": "url",
      "id": "primary_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Secondary Button"
    },
    {
      "type": "text",
      "id": "secondary_text",
      "label": "Button Text",
      "default": "Meet Avery"
    },
    {
      "type": "url",
      "id": "secondary_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#FDF9F6"
    }
  ],
  "presets": [
    {
      "name": "Hero Banner"
    }
  ]
}
{% endschema %}

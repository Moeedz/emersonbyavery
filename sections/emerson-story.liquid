{% comment %}
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  EMERSON BY AVERY â€” MEET AVERY (STORY SECTION)
  Split layout with image and animated reveals
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
{% endcomment %}

{{ 'section-emerson-story.css' | asset_url | stylesheet_tag }}

<section 
  class="emerson-story"
  data-section-id="{{ section.id }}"
  style="--section-bg: {{ section.settings.bg_color }};"
>
  <div class="emerson-story__container">
    <!-- Visual Side -->
    <div class="emerson-story__visual" data-animate="fade-right">
      <div class="emerson-story__image-wrapper">
        <!-- Main Image -->
        <div class="emerson-story__image" data-animate="clip-up">
          {%- if section.settings.main_image != blank -%}
            {{ section.settings.main_image | image_url: width: 1200 | image_tag: loading: 'lazy', class: 'emerson-story__img' }}
          {%- else -%}
            <div class="emerson-story__image-placeholder">
              <span>ğŸ‘§ğŸ¨</span>
            </div>
          {%- endif -%}
        </div>
      </div>
      
      <!-- Floating Badge -->
      {%- if section.settings.show_badge -%}
        <div class="emerson-story__badge" data-animate="scale-up" data-delay="2">
          <div class="emerson-story__badge-icon">{{ section.settings.badge_emoji | default: 'â­' }}</div>
          <div class="emerson-story__badge-text">
            {{ section.settings.badge_text | default: '500+ Happy Customers' }}
            <span>{{ section.settings.badge_subtext | default: 'Since 2023' }}</span>
          </div>
        </div>
      {%- endif -%}
    </div>

    <!-- Content Side -->
    <div class="emerson-story__content">
      {%- if section.settings.tag != blank -%}
        <span class="emerson-section-tag" data-animate="fade-up">{{ section.settings.tag }}</span>
      {%- endif -%}
      
      {%- if section.settings.heading != blank -%}
        <h2 class="emerson-section-title" data-animate="fade-up" data-delay="1">{{ section.settings.heading }}</h2>
      {%- endif -%}
      
      {%- if section.settings.text_1 != blank -%}
        <p class="emerson-story__text" data-animate="fade-up" data-delay="2">
          {{ section.settings.text_1 }}
        </p>
      {%- endif -%}
      
      {%- if section.settings.text_2 != blank -%}
        <p class="emerson-story__text" data-animate="fade-up" data-delay="3">
          {{ section.settings.text_2 }}
        </p>
      {%- endif -%}
      
      {%- if section.settings.quote != blank -%}
        <blockquote class="emerson-story__quote" data-animate="fade-up" data-delay="4">
          <span class="emerson-story__quote-mark">"</span>
          <p>{{ section.settings.quote }}</p>
          {%- if section.settings.quote_author != blank -%}
            <cite>â€” {{ section.settings.quote_author }}</cite>
          {%- endif -%}
        </blockquote>
      {%- endif -%}
      
      {%- if section.settings.show_signature -%}
        <div class="emerson-story__signature" data-animate="fade-up" data-delay="5">
          <div class="emerson-story__signature-avatar">
            {%- if section.settings.avatar != blank -%}
              {{ section.settings.avatar | image_url: width: 120 | image_tag }}
            {%- else -%}
              ğŸ‘§
            {%- endif -%}
          </div>
          <div class="emerson-story__signature-info">
            <div class="emerson-story__signature-name">{{ section.settings.signature_name | default: 'Avery' }}</div>
            <div class="emerson-story__signature-title">{{ section.settings.signature_title | default: 'Chief Imagination Officer' }}</div>
          </div>
        </div>
      {%- endif -%}
      
      {%- if section.settings.button_text != blank and section.settings.button_link != blank -%}
        <a href="{{ section.settings.button_link }}" class="emerson-btn emerson-btn--primary" data-animate="fade-up" data-delay="6" style="margin-top: 32px;">
          {{ section.settings.button_text }}
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/>
          </svg>
        </a>
      {%- endif -%}
    </div>
  </div>
</section>

<script>
  (function() {
    const section = document.querySelector('[data-section-id="{{ section.id }}"]');
    if (!section) return;

    const observerOptions = { threshold: 0.15, rootMargin: '0px 0px -80px 0px' };
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');
        }
      });
    }, observerOptions);

    section.querySelectorAll('[data-animate]').forEach(el => observer.observe(el));
  })();
</script>

{% schema %}
{
  "name": "ğŸ‘§ Meet Avery",
  "tag": "section",
  "class": "section-emerson-story",
  "settings": [
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "main_image",
      "label": "Main image",
      "info": "Recommended: 1200x800px or similar aspect ratio"
    },
    {
      "type": "header",
      "content": "Badge"
    },
    {
      "type": "checkbox",
      "id": "show_badge",
      "label": "Show floating badge",
      "default": true
    },
    {
      "type": "text",
      "id": "badge_emoji",
      "label": "Badge emoji",
      "default": "â­"
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge text",
      "default": "500+ Happy Customers"
    },
    {
      "type": "text",
      "id": "badge_subtext",
      "label": "Badge subtext",
      "default": "Since 2023"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "tag",
      "label": "Tag",
      "default": "Our Story"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Meet Avery"
    },
    {
      "type": "textarea",
      "id": "text_1",
      "label": "Paragraph 1",
      "default": "What started as doodles on a napkin has blossomed into a world of colorful creations. At just 7 years old, Avery sees magic in everyday moments and transforms that wonder into art that makes people smile."
    },
    {
      "type": "textarea",
      "id": "text_2",
      "label": "Paragraph 2",
      "default": "Every brushstroke is filled with imagination, every color chosen with joy. This isn't just art â€” it's a window into a child's pure, unfiltered creativity."
    },
    {
      "type": "header",
      "content": "Quote"
    },
    {
      "type": "textarea",
      "id": "quote",
      "label": "Quote",
      "default": "I draw what makes me happy, and I hope it makes you happy too!"
    },
    {
      "type": "text",
      "id": "quote_author",
      "label": "Quote author",
      "default": "Avery, Age 7"
    },
    {
      "type": "header",
      "content": "Signature"
    },
    {
      "type": "checkbox",
      "id": "show_signature",
      "label": "Show signature",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "avatar",
      "label": "Avatar image",
      "info": "Recommended: 120x120px"
    },
    {
      "type": "text",
      "id": "signature_name",
      "label": "Name",
      "default": "Avery"
    },
    {
      "type": "text",
      "id": "signature_title",
      "label": "Title",
      "default": "Chief Imagination Officer"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#FDF9F6"
    }
  ],
  "presets": [
    {
      "name": "ğŸ‘§ Meet Avery"
    }
  ]
}
{% endschema %}
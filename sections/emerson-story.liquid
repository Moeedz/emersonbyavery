{% comment %}EMERSON BY AVERY ‚Äî MEET AVERY{% endcomment %}
{{ 'section-emerson-story.css' | asset_url | stylesheet_tag }}
{{ 'emerson-animations.css' | asset_url | stylesheet_tag }}

{%- style -%}
#emerson-story-{{ section.id }} {
  --section-padding-top: {{ section.settings.padding_top }}px;
  --section-padding-bottom: {{ section.settings.padding_bottom }}px;
  --section-padding-top-mobile: {{ section.settings.padding_top_mobile }}px;
  --section-padding-bottom-mobile: {{ section.settings.padding_bottom_mobile }}px;
  --section-max-width: {{ section.settings.section_max_width }}px;
  --content-gap: {{ section.settings.content_gap }}px;
  --section-bg: {{ section.settings.bg_color }};
  --tag-color: {{ section.settings.tag_color }};
  --title-color: {{ section.settings.title_color }};
  --text-color: {{ section.settings.text_color }};
  --quote-color: {{ section.settings.quote_color }};
  --quote-bg: {{ section.settings.quote_bg_color }};
  --tag-size: {{ section.settings.tag_size }}px;
  --title-size-desktop: {{ section.settings.title_size_desktop }}px;
  --title-size-mobile: {{ section.settings.title_size_mobile }}px;
  --text-size: {{ section.settings.text_size }}px;
  --quote-size: {{ section.settings.quote_size }}px;
  --image-border-radius: {{ section.settings.image_border_radius }}px;
  --badge-bg: {{ section.settings.badge_bg_color }};
  --badge-text: {{ section.settings.badge_text_color }};
}
{%- endstyle -%}

<section id="emerson-story-{{ section.id }}" class="emerson-story {% if section.settings.reverse_layout %}emerson-story--reverse{% endif %}">
  <div class="emerson-story__container">
    <div class="emerson-story__images" data-animate="fade-right">
      <div class="emerson-story__image-grid">
        <div class="emerson-story__image emerson-story__image--main">
          {%- if section.settings.image_main != blank -%}{{ section.settings.image_main | image_url: width: 800 | image_tag: loading: 'lazy' }}{%- else -%}<div class="emerson-story__image--placeholder"><span>üé®</span></div>{%- endif -%}
        </div>
        <div class="emerson-story__image emerson-story__image--small">
          {%- if section.settings.image_small_1 != blank -%}{{ section.settings.image_small_1 | image_url: width: 400 | image_tag: loading: 'lazy' }}{%- else -%}<div class="emerson-story__image--placeholder"><span>üñåÔ∏è</span></div>{%- endif -%}
        </div>
        <div class="emerson-story__image emerson-story__image--small">
          {%- if section.settings.image_small_2 != blank -%}{{ section.settings.image_small_2 | image_url: width: 400 | image_tag: loading: 'lazy' }}{%- else -%}<div class="emerson-story__image--placeholder"><span>‚ú®</span></div>{%- endif -%}
        </div>
      </div>
      {%- if section.settings.show_badge -%}
      <div class="emerson-story__badge">
        <span class="emerson-story__badge-emoji">{{ section.settings.badge_emoji }}</span>
        <span class="emerson-story__badge-text">{{ section.settings.badge_text }}</span>
        <span class="emerson-story__badge-subtext">{{ section.settings.badge_subtext }}</span>
      </div>
      {%- endif -%}
    </div>
    <div class="emerson-story__content" data-animate="fade-left" data-delay="200">
      {%- if section.settings.tag != blank -%}<span class="emerson-story__tag">{{ section.settings.tag }}</span>{%- endif -%}
      {%- if section.settings.title != blank -%}<h2 class="emerson-story__title">{{ section.settings.title }}</h2>{%- endif -%}
      {%- if section.settings.text_1 != blank -%}<p class="emerson-story__text">{{ section.settings.text_1 }}</p>{%- endif -%}
      {%- if section.settings.text_2 != blank -%}<p class="emerson-story__text">{{ section.settings.text_2 }}</p>{%- endif -%}
      {%- if section.settings.quote != blank -%}<div class="emerson-story__quote"><span class="emerson-story__quote-mark">"</span><p>{{ section.settings.quote }}</p></div>{%- endif -%}
      <div class="emerson-story__signature">
        {%- if section.settings.avatar != blank -%}<div class="emerson-story__avatar">{{ section.settings.avatar | image_url: width: 120 | image_tag: loading: 'lazy' }}</div>{%- endif -%}
        <div class="emerson-story__signature-text">
          <span class="emerson-story__signature-name">{{ section.settings.signature_name }}</span>
          <span class="emerson-story__signature-title">{{ section.settings.signature_title }}</span>
        </div>
      </div>
      {%- if section.settings.btn_text != blank -%}<a href="{{ section.settings.btn_link }}" class="emerson-btn emerson-btn--primary">{{ section.settings.btn_text }}</a>{%- endif -%}
    </div>
  </div>
</section>

<script>
(function() {
  const section = document.querySelector('#emerson-story-{{ section.id }}');
  if (!section) return;
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const delay = entry.target.dataset.delay || 0;
        setTimeout(() => entry.target.classList.add('in-view'), delay);
      }
    });
  }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
  section.querySelectorAll('[data-animate]').forEach(el => observer.observe(el));
})();
</script>

{% schema %}
{
  "name": "üëß Meet Avery",
  "tag": "section",
  "class": "section-emerson-story",
  "settings": [
    {"type":"header","content":"Layout"},
    {"type":"checkbox","id":"reverse_layout","label":"Reverse","default":false},
    {"type":"range","id":"section_max_width","label":"Max width","min":1000,"max":1400,"step":100,"default":1200,"unit":"px"},
    {"type":"range","id":"content_gap","label":"Gap","min":40,"max":120,"step":20,"default":80,"unit":"px"},
    {"type":"header","content":"Padding"},
    {"type":"range","id":"padding_top","label":"Top ‚Äî Desktop","min":0,"max":200,"step":10,"default":100,"unit":"px"},
    {"type":"range","id":"padding_bottom","label":"Bottom ‚Äî Desktop","min":0,"max":200,"step":10,"default":100,"unit":"px"},
    {"type":"range","id":"padding_top_mobile","label":"Top ‚Äî Mobile","min":0,"max":100,"step":10,"default":60,"unit":"px"},
    {"type":"range","id":"padding_bottom_mobile","label":"Bottom ‚Äî Mobile","min":0,"max":100,"step":10,"default":60,"unit":"px"},
    {"type":"header","content":"Colors"},
    {"type":"color","id":"bg_color","label":"Background","default":"#FDF9F6"},
    {"type":"color","id":"tag_color","label":"Tag","default":"#E85D75"},
    {"type":"color","id":"title_color","label":"Title","default":"#1F1A14"},
    {"type":"color","id":"text_color","label":"Text","default":"#756758"},
    {"type":"color","id":"quote_color","label":"Quote","default":"#1F1A14"},
    {"type":"color","id":"quote_bg_color","label":"Quote bg","default":"#FFFFFF"},
    {"type":"header","content":"Images"},
    {"type":"image_picker","id":"image_main","label":"Main image"},
    {"type":"image_picker","id":"image_small_1","label":"Small image 1"},
    {"type":"image_picker","id":"image_small_2","label":"Small image 2"},
    {"type":"range","id":"image_border_radius","label":"Radius","min":0,"max":40,"step":4,"default":24,"unit":"px"},
    {"type":"header","content":"Badge"},
    {"type":"checkbox","id":"show_badge","label":"Show","default":true},
    {"type":"text","id":"badge_emoji","label":"Emoji","default":"üé®"},
    {"type":"text","id":"badge_text","label":"Text","default":"7"},
    {"type":"text","id":"badge_subtext","label":"Subtext","default":"years old"},
    {"type":"color","id":"badge_bg_color","label":"Background","default":"#FFFFFF"},
    {"type":"color","id":"badge_text_color","label":"Text color","default":"#1F1A14"},
    {"type":"header","content":"Content"},
    {"type":"text","id":"tag","label":"Tag","default":"Meet the Artist"},
    {"type":"range","id":"tag_size","label":"Tag size","min":16,"max":32,"step":2,"default":22,"unit":"px"},
    {"type":"text","id":"title","label":"Title","default":"Hi, I'm Avery!"},
    {"type":"range","id":"title_size_desktop","label":"Title ‚Äî Desktop","min":32,"max":72,"step":4,"default":48,"unit":"px"},
    {"type":"range","id":"title_size_mobile","label":"Title ‚Äî Mobile","min":28,"max":48,"step":4,"default":36,"unit":"px"},
    {"type":"textarea","id":"text_1","label":"Paragraph 1","default":"I'm 7 years old and I love to draw!"},
    {"type":"textarea","id":"text_2","label":"Paragraph 2","default":"My mom and dad help me put my drawings on shirts."},
    {"type":"range","id":"text_size","label":"Text size","min":14,"max":22,"step":1,"default":17,"unit":"px"},
    {"type":"textarea","id":"quote","label":"Quote","default":"Every color has a story!"},
    {"type":"range","id":"quote_size","label":"Quote size","min":16,"max":28,"step":2,"default":20,"unit":"px"},
    {"type":"header","content":"Signature"},
    {"type":"image_picker","id":"avatar","label":"Avatar"},
    {"type":"text","id":"signature_name","label":"Name","default":"Avery"},
    {"type":"text","id":"signature_title","label":"Title","default":"Chief Artist"},
    {"type":"header","content":"Button"},
    {"type":"text","id":"btn_text","label":"Text","default":"Shop Avery's Art"},
    {"type":"url","id":"btn_link","label":"Link"}
  ],
  "presets":[{"name":"üëß Meet Avery"}]
}
{% endschema %}
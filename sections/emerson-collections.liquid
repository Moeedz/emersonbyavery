{% comment %}EMERSON BY AVERY ‚Äî SHOP BY COLLECTION{% endcomment %}
{{ 'section-emerson-collections.css' | asset_url | stylesheet_tag }}

{%- style -%}
#emerson-collections-{{ section.id }} {
  --section-padding-top: {{ section.settings.padding_top }}px;
  --section-padding-bottom: {{ section.settings.padding_bottom }}px;
  --section-padding-top-mobile: {{ section.settings.padding_top_mobile }}px;
  --section-padding-bottom-mobile: {{ section.settings.padding_bottom_mobile }}px;
  --section-max-width: {{ section.settings.section_max_width }}px;
  --grid-columns: {{ section.settings.columns_desktop }};
  --grid-columns-mobile: {{ section.settings.columns_mobile }};
  --grid-gap: {{ section.settings.grid_gap }}px;
  --section-bg: {{ section.settings.bg_color }};
  --card-bg: {{ section.settings.card_bg_color }};
  --tag-color: {{ section.settings.tag_color }};
  --tag-size: {{ section.settings.tag_size }}px;
  --heading-color: {{ section.settings.heading_color }};
  --heading-size-desktop: {{ section.settings.heading_size_desktop }}px;
  --heading-size-mobile: {{ section.settings.heading_size_mobile }}px;
  --subtitle-color: {{ section.settings.subtitle_color }};
  --subtitle-size: {{ section.settings.subtitle_size }}px;
  --card-border-radius: {{ section.settings.card_border_radius }}px;
  --card-padding: {{ section.settings.card_padding }}px;
  --card-min-height: {{ section.settings.card_min_height }}px;
  --emoji-size: {{ section.settings.emoji_size }}px;
  --card-title-size: {{ section.settings.card_title_size }}px;
  --card-title-color: {{ section.settings.card_title_color }};
  --card-count-size: {{ section.settings.card_count_size }}px;
  --card-count-color: {{ section.settings.card_count_color }};
}
{%- endstyle -%}

<section id="emerson-collections-{{ section.id }}" class="emerson-collections">
  <div class="emerson-collections__container">
    <div class="emerson-section-header" style="text-align: {{ section.settings.header_alignment }};">
      {%- if section.settings.tag != blank -%}<span class="emerson-section-tag">{{ section.settings.tag }}</span>{%- endif -%}
      {%- if section.settings.heading != blank -%}<h2 class="emerson-section-title">{{ section.settings.heading }}</h2>{%- endif -%}
      {%- if section.settings.subheading != blank -%}<p class="emerson-section-subtitle">{{ section.settings.subheading }}</p>{%- endif -%}
    </div>
    <div class="emerson-collections__grid">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'collection' -%}
            {%- assign collection = block.settings.collection -%}
            <a href="{{ collection.url | default: '#' }}" class="emerson-collections__card" style="{% if block.settings.bg_gradient != blank %}background: {{ block.settings.bg_gradient }};{% endif %}" {{ block.shopify_attributes }}>
              <span class="emerson-collections__emoji">{{ block.settings.emoji }}</span>
              <h3 class="emerson-collections__card-title">{{ block.settings.custom_title | default: collection.title | default: 'Collection' }}</h3>
              <span class="emerson-collections__card-count">{{ block.settings.custom_count | default: collection.products_count | default: 0 }} products</span>
            </a>
        {%- endcase -%}
      {%- endfor -%}
    </div>
    {%- if section.settings.show_view_all and section.settings.view_all_link != blank -%}
    <div class="emerson-collections__footer">
      <a href="{{ section.settings.view_all_link }}" class="emerson-btn emerson-btn--secondary">{{ section.settings.view_all_text }}</a>
    </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "üé® Collections",
  "tag": "section",
  "class": "section-emerson-collections",
  "settings": [
    {"type":"header","content":"Layout"},
    {"type":"range","id":"section_max_width","label":"Max width","min":1000,"max":1600,"step":200,"default":1200,"unit":"px"},
    {"type":"range","id":"columns_desktop","label":"Columns desktop","min":2,"max":5,"step":1,"default":3},
    {"type":"range","id":"columns_mobile","label":"Columns mobile","min":1,"max":2,"step":0.5,"default":1},
    {"type":"range","id":"grid_gap","label":"Grid gap","min":12,"max":48,"step":4,"default":24,"unit":"px"},
    {"type":"header","content":"Padding"},
    {"type":"range","id":"padding_top","label":"Top ‚Äî Desktop","min":0,"max":200,"step":10,"default":100,"unit":"px"},
    {"type":"range","id":"padding_bottom","label":"Bottom ‚Äî Desktop","min":0,"max":200,"step":10,"default":100,"unit":"px"},
    {"type":"range","id":"padding_top_mobile","label":"Top ‚Äî Mobile","min":0,"max":100,"step":10,"default":60,"unit":"px"},
    {"type":"range","id":"padding_bottom_mobile","label":"Bottom ‚Äî Mobile","min":0,"max":100,"step":10,"default":60,"unit":"px"},
    {"type":"header","content":"Colors"},
    {"type":"color","id":"bg_color","label":"Background","default":"#FFFFFF"},
    {"type":"color","id":"card_bg_color","label":"Card background","default":"#FDF9F6"},
    {"type":"header","content":"Header"},
    {"type":"select","id":"header_alignment","label":"Alignment","options":[{"value":"left","label":"Left"},{"value":"center","label":"Center"}],"default":"center"},
    {"type":"text","id":"tag","label":"Tag","default":"Explore"},
    {"type":"color","id":"tag_color","label":"Tag color","default":"#E85D75"},
    {"type":"range","id":"tag_size","label":"Tag size","min":16,"max":32,"step":2,"default":22,"unit":"px"},
    {"type":"text","id":"heading","label":"Heading","default":"Shop by Collection"},
    {"type":"color","id":"heading_color","label":"Heading color","default":"#1F1A14"},
    {"type":"range","id":"heading_size_desktop","label":"Heading ‚Äî Desktop","min":28,"max":72,"step":4,"default":48,"unit":"px"},
    {"type":"range","id":"heading_size_mobile","label":"Heading ‚Äî Mobile","min":24,"max":48,"step":4,"default":32,"unit":"px"},
    {"type":"textarea","id":"subheading","label":"Subheading","default":"Find the perfect piece"},
    {"type":"color","id":"subtitle_color","label":"Subtitle color","default":"#756758"},
    {"type":"range","id":"subtitle_size","label":"Subtitle size","min":14,"max":24,"step":2,"default":18,"unit":"px"},
    {"type":"header","content":"Cards"},
    {"type":"range","id":"card_border_radius","label":"Radius","min":0,"max":40,"step":4,"default":24,"unit":"px"},
    {"type":"range","id":"card_padding","label":"Padding","min":20,"max":60,"step":4,"default":32,"unit":"px"},
    {"type":"range","id":"card_min_height","label":"Min height","min":150,"max":350,"step":50,"default":200,"unit":"px"},
    {"type":"range","id":"emoji_size","label":"Emoji size","min":32,"max":80,"step":8,"default":48,"unit":"px"},
    {"type":"range","id":"card_title_size","label":"Title size","min":18,"max":32,"step":2,"default":24,"unit":"px"},
    {"type":"color","id":"card_title_color","label":"Title color","default":"#1F1A14"},
    {"type":"range","id":"card_count_size","label":"Count size","min":12,"max":18,"step":2,"default":14,"unit":"px"},
    {"type":"color","id":"card_count_color","label":"Count color","default":"#756758"},
    {"type":"header","content":"View All"},
    {"type":"checkbox","id":"show_view_all","label":"Show button","default":false},
    {"type":"text","id":"view_all_text","label":"Text","default":"View All"},
    {"type":"url","id":"view_all_link","label":"Link"}
  ],
  "blocks":[
    {"type":"collection","name":"Collection","settings":[
      {"type":"collection","id":"collection","label":"Collection"},
      {"type":"text","id":"custom_title","label":"Custom title"},
      {"type":"text","id":"custom_count","label":"Custom count"},
      {"type":"text","id":"emoji","label":"Emoji","default":"üé®"},
      {"type":"text","id":"bg_gradient","label":"Gradient","default":"linear-gradient(135deg, #FFE5EC 0%, #FDF9F6 100%)"}
    ]}
  ],
  "presets":[{"name":"üé® Collections","blocks":[
    {"type":"collection","settings":{"emoji":"üåà","custom_title":"Rainbow"}},
    {"type":"collection","settings":{"emoji":"ü¶ã","custom_title":"Nature"}},
    {"type":"collection","settings":{"emoji":"‚≠ê","custom_title":"Best Sellers"}}
  ]}]
}
{% endschema %}

{% comment %}EMERSON BY AVERY ‚Äî PRODUCTS{% endcomment %}
{{ 'section-emerson-products.css' | asset_url | stylesheet_tag }}
{{ 'emerson-animations.css' | asset_url | stylesheet_tag }}

{%- style -%}
#emerson-products-{{ section.id }} {
  --section-padding-top: {{ section.settings.padding_top }}px;
  --section-padding-bottom: {{ section.settings.padding_bottom }}px;
  --section-padding-top-mobile: {{ section.settings.padding_top_mobile }}px;
  --section-padding-bottom-mobile: {{ section.settings.padding_bottom_mobile }}px;
  --section-max-width: {{ section.settings.section_max_width }}px;
  --grid-columns: {{ section.settings.columns_desktop }};
  --grid-columns-mobile: {{ section.settings.columns_mobile }};
  --grid-gap: {{ section.settings.grid_gap }}px;
  --section-bg: {{ section.settings.bg_color }};
  --card-bg: {{ section.settings.card_bg_color }};
  --card-border-radius: {{ section.settings.card_border_radius }}px;
  --title-color: {{ section.settings.product_title_color }};
  --price-color: {{ section.settings.price_color }};
  --compare-price-color: {{ section.settings.compare_price_color }};
  --badge-bg: {{ section.settings.badge_bg_color }};
  --badge-text: {{ section.settings.badge_text_color }};
  --tag-color: {{ section.settings.tag_color }};
  --tag-size: {{ section.settings.tag_size }}px;
  --heading-color: {{ section.settings.heading_color }};
  --heading-size-desktop: {{ section.settings.heading_size_desktop }}px;
  --heading-size-mobile: {{ section.settings.heading_size_mobile }}px;
  --subtitle-color: {{ section.settings.subtitle_color }};
  --subtitle-size: {{ section.settings.subtitle_size }}px;
  --card-title-size: {{ section.settings.card_title_size }}px;
  --card-price-size: {{ section.settings.card_price_size }}px;
  --card-padding: {{ section.settings.card_padding }}px;
  --image-aspect-ratio: {{ section.settings.image_aspect_ratio }};
  --image-border-radius: {{ section.settings.image_border_radius }}px;
}
{%- endstyle -%}

<section id="emerson-products-{{ section.id }}" class="emerson-products">
  <div class="emerson-products__container">
    <div class="emerson-section-header" style="text-align: {{ section.settings.header_alignment }};">
      {%- if section.settings.tag != blank -%}<span class="emerson-section-tag">{{ section.settings.tag }}</span>{%- endif -%}
      {%- if section.settings.heading != blank -%}<h2 class="emerson-section-title">{{ section.settings.heading }}</h2>{%- endif -%}
      {%- if section.settings.subheading != blank -%}<p class="emerson-section-subtitle">{{ section.settings.subheading }}</p>{%- endif -%}
    </div>
    <div class="emerson-products__grid">
      {%- assign products_to_show = section.settings.collection.products | default: collections.all.products -%}
      {%- for product in products_to_show limit: section.settings.products_limit -%}
        <div class="emerson-products__card">
          <a href="{{ product.url }}" class="emerson-products__image-wrapper">
            {%- if product.featured_image -%}
            {{ product.featured_image | image_url: width: 600 | image_tag: loading: 'lazy', class: 'emerson-products__image' }}
            {%- if product.images[1] and section.settings.show_secondary_image -%}
            {{ product.images[1] | image_url: width: 600 | image_tag: loading: 'lazy', class: 'emerson-products__image emerson-products__image--secondary' }}
            {%- endif -%}
            {%- else -%}<div class="emerson-products__image-placeholder"><span>üé®</span></div>{%- endif -%}
            {%- if section.settings.show_badges -%}
              {%- if product.available == false -%}<span class="emerson-products__badge emerson-products__badge--soldout">Sold out</span>
              {%- elsif product.compare_at_price > product.price -%}<span class="emerson-products__badge emerson-products__badge--sale">Sale</span>{%- endif -%}
            {%- endif -%}
          </a>
          <div class="emerson-products__details">
            <a href="{{ product.url }}" class="emerson-products__title">{{ product.title }}</a>
            <div class="emerson-products__price">
              <span class="emerson-products__price-current">{{ product.price | money }}</span>
              {%- if product.compare_at_price > product.price -%}<span class="emerson-products__price-compare">{{ product.compare_at_price | money }}</span>{%- endif -%}
            </div>
          </div>
        </div>
      {%- else -%}
        {%- for i in (1..4) -%}
        <div class="emerson-products__card">
          <a href="#" class="emerson-products__image-wrapper"><div class="emerson-products__image-placeholder"><span>üé®</span></div></a>
          <div class="emerson-products__details"><a href="#" class="emerson-products__title">Product Title</a><div class="emerson-products__price"><span class="emerson-products__price-current">$29.00</span></div></div>
        </div>
        {%- endfor -%}
      {%- endfor -%}
    </div>
    {%- if section.settings.show_view_all and section.settings.view_all_link != blank -%}
    <div class="emerson-products__footer"><a href="{{ section.settings.view_all_link }}" class="emerson-btn emerson-btn--secondary">{{ section.settings.view_all_text }}</a></div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "‚≠ê Products",
  "tag": "section",
  "class": "section-emerson-products",
  "settings": [
    {"type":"header","content":"Layout"},
    {"type":"range","id":"section_max_width","label":"Max width","min":1000,"max":1600,"step":200,"default":1200,"unit":"px"},
    {"type":"range","id":"columns_desktop","label":"Columns desktop","min":2,"max":6,"step":1,"default":4},
    {"type":"range","id":"columns_mobile","label":"Columns mobile","min":1,"max":3,"step":1,"default":2},
    {"type":"range","id":"grid_gap","label":"Gap","min":12,"max":48,"step":4,"default":24,"unit":"px"},
    {"type":"header","content":"Padding"},
    {"type":"range","id":"padding_top","label":"Top ‚Äî Desktop","min":0,"max":200,"step":10,"default":80,"unit":"px"},
    {"type":"range","id":"padding_bottom","label":"Bottom ‚Äî Desktop","min":0,"max":200,"step":10,"default":80,"unit":"px"},
    {"type":"range","id":"padding_top_mobile","label":"Top ‚Äî Mobile","min":0,"max":100,"step":10,"default":60,"unit":"px"},
    {"type":"range","id":"padding_bottom_mobile","label":"Bottom ‚Äî Mobile","min":0,"max":100,"step":10,"default":60,"unit":"px"},
    {"type":"header","content":"Colors"},
    {"type":"color","id":"bg_color","label":"Background","default":"#FDF9F6"},
    {"type":"color","id":"card_bg_color","label":"Card bg","default":"#FFFFFF"},
    {"type":"color","id":"product_title_color","label":"Title","default":"#1F1A14"},
    {"type":"color","id":"price_color","label":"Price","default":"#1F1A14"},
    {"type":"color","id":"compare_price_color","label":"Compare","default":"#A89F94"},
    {"type":"color","id":"badge_bg_color","label":"Badge bg","default":"#E85D75"},
    {"type":"color","id":"badge_text_color","label":"Badge text","default":"#FFFFFF"},
    {"type":"header","content":"Header"},
    {"type":"select","id":"header_alignment","label":"Alignment","options":[{"value":"left","label":"Left"},{"value":"center","label":"Center"}],"default":"center"},
    {"type":"text","id":"tag","label":"Tag","default":"Shop"},
    {"type":"color","id":"tag_color","label":"Tag color","default":"#E85D75"},
    {"type":"range","id":"tag_size","label":"Tag size","min":16,"max":32,"step":2,"default":22,"unit":"px"},
    {"type":"text","id":"heading","label":"Heading","default":"Customer Favorites"},
    {"type":"color","id":"heading_color","label":"Heading color","default":"#1F1A14"},
    {"type":"range","id":"heading_size_desktop","label":"Heading ‚Äî Desktop","min":28,"max":72,"step":4,"default":48,"unit":"px"},
    {"type":"range","id":"heading_size_mobile","label":"Heading ‚Äî Mobile","min":24,"max":48,"step":4,"default":32,"unit":"px"},
    {"type":"textarea","id":"subheading","label":"Subheading","default":"Our most loved pieces"},
    {"type":"color","id":"subtitle_color","label":"Subtitle color","default":"#756758"},
    {"type":"range","id":"subtitle_size","label":"Subtitle size","min":14,"max":22,"step":2,"default":18,"unit":"px"},
    {"type":"header","content":"Products"},
    {"type":"collection","id":"collection","label":"Collection"},
    {"type":"range","id":"products_limit","label":"Products","min":2,"max":12,"step":1,"default":4},
    {"type":"checkbox","id":"show_secondary_image","label":"Secondary image","default":true},
    {"type":"checkbox","id":"show_badges","label":"Show badges","default":true},
    {"type":"header","content":"Cards"},
    {"type":"range","id":"card_border_radius","label":"Card radius","min":0,"max":40,"step":4,"default":20,"unit":"px"},
    {"type":"range","id":"card_padding","label":"Card padding","min":0,"max":24,"step":4,"default":12,"unit":"px"},
    {"type":"select","id":"image_aspect_ratio","label":"Aspect ratio","options":[{"value":"1/1","label":"Square"},{"value":"4/5","label":"4:5"},{"value":"3/4","label":"3:4"}],"default":"1/1"},
    {"type":"range","id":"image_border_radius","label":"Image radius","min":0,"max":32,"step":4,"default":16,"unit":"px"},
    {"type":"range","id":"card_title_size","label":"Title size","min":12,"max":20,"step":1,"default":15,"unit":"px"},
    {"type":"range","id":"card_price_size","label":"Price size","min":12,"max":20,"step":1,"default":14,"unit":"px"},
    {"type":"header","content":"View All"},
    {"type":"checkbox","id":"show_view_all","label":"Show button","default":true},
    {"type":"text","id":"view_all_text","label":"Text","default":"View All Products"},
    {"type":"url","id":"view_all_link","label":"Link"}
  ],
  "presets":[{"name":"‚≠ê Products"}]
}
{% endschema %}
{% comment %}EMERSON BY AVERY ‚Äî INSTAGRAM{% endcomment %}
{{ 'section-emerson-instagram.css' | asset_url | stylesheet_tag }}
{{ 'emerson-animations.css' | asset_url | stylesheet_tag }}

{%- style -%}
#emerson-instagram-{{ section.id }} {
  --section-padding-top: {{ section.settings.padding_top }}px;
  --section-padding-bottom: {{ section.settings.padding_bottom }}px;
  --section-padding-top-mobile: {{ section.settings.padding_top_mobile }}px;
  --section-padding-bottom-mobile: {{ section.settings.padding_bottom_mobile }}px;
  --section-max-width: {{ section.settings.section_max_width }}px;
  --grid-columns: {{ section.settings.columns_desktop }};
  --grid-columns-mobile: {{ section.settings.columns_mobile }};
  --grid-gap: {{ section.settings.grid_gap }}px;
  --section-bg: {{ section.settings.bg_color }};
  --overlay-bg: {{ section.settings.overlay_bg_color }};
  --overlay-text: {{ section.settings.overlay_text_color }};
  --tag-color: {{ section.settings.tag_color }};
  --tag-size: {{ section.settings.tag_size }}px;
  --heading-color: {{ section.settings.heading_color }};
  --heading-size-desktop: {{ section.settings.heading_size_desktop }}px;
  --heading-size-mobile: {{ section.settings.heading_size_mobile }}px;
  --subtitle-color: {{ section.settings.subtitle_color }};
  --subtitle-size: {{ section.settings.subtitle_size }}px;
  --card-border-radius: {{ section.settings.card_border_radius }}px;
}
{%- endstyle -%}

<section id="emerson-instagram-{{ section.id }}" class="emerson-instagram">
  <div class="emerson-instagram__container">
    <div class="emerson-section-header" style="text-align: {{ section.settings.header_alignment }};">
      {%- if section.settings.tag != blank -%}<span class="emerson-section-tag">{{ section.settings.tag }}</span>{%- endif -%}
      {%- if section.settings.heading != blank -%}<h2 class="emerson-section-title">{{ section.settings.heading }}</h2>{%- endif -%}
      {%- if section.settings.subheading != blank -%}<p class="emerson-section-subtitle">{{ section.settings.subheading }}</p>{%- endif -%}
    </div>
    <div class="emerson-instagram__grid">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'image' -%}
            <a href="{{ block.settings.link | default: section.settings.instagram_url | default: '#' }}" class="emerson-instagram__item" target="_blank" rel="noopener noreferrer" {{ block.shopify_attributes }}>
              {%- if block.settings.image != blank -%}{{ block.settings.image | image_url: width: 500 | image_tag: loading: 'lazy', class: 'emerson-instagram__image' }}{%- else -%}<div class="emerson-instagram__placeholder"><span>{{ block.settings.placeholder_emoji | default: 'üé®' }}</span></div>{%- endif -%}
              <div class="emerson-instagram__overlay">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
              </div>
            </a>
        {%- endcase -%}
      {%- endfor -%}
    </div>
    {%- if section.settings.show_follow_button and section.settings.instagram_url != blank -%}
    <div class="emerson-instagram__footer">
      <a href="{{ section.settings.instagram_url }}" class="emerson-btn emerson-btn--primary" target="_blank" rel="noopener noreferrer">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
        {{ section.settings.follow_button_text }}
      </a>
    </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "üì∏ Instagram",
  "tag": "section",
  "class": "section-emerson-instagram",
  "settings": [
    {"type":"header","content":"Layout"},
    {"type":"range","id":"section_max_width","label":"Max width","min":1000,"max":1600,"step":200,"default":1200,"unit":"px"},
    {"type":"range","id":"columns_desktop","label":"Columns desktop","min":3,"max":8,"step":1,"default":6},
    {"type":"range","id":"columns_mobile","label":"Columns mobile","min":2,"max":4,"step":1,"default":3},
    {"type":"range","id":"grid_gap","label":"Gap","min":4,"max":24,"step":4,"default":8,"unit":"px"},
    {"type":"header","content":"Padding"},
    {"type":"range","id":"padding_top","label":"Top ‚Äî Desktop","min":0,"max":200,"step":10,"default":80,"unit":"px"},
    {"type":"range","id":"padding_bottom","label":"Bottom ‚Äî Desktop","min":0,"max":200,"step":10,"default":80,"unit":"px"},
    {"type":"range","id":"padding_top_mobile","label":"Top ‚Äî Mobile","min":0,"max":100,"step":10,"default":60,"unit":"px"},
    {"type":"range","id":"padding_bottom_mobile","label":"Bottom ‚Äî Mobile","min":0,"max":100,"step":10,"default":60,"unit":"px"},
    {"type":"header","content":"Colors"},
    {"type":"color","id":"bg_color","label":"Background","default":"#FDF9F6"},
    {"type":"color","id":"overlay_bg_color","label":"Overlay bg","default":"#E85D75"},
    {"type":"color","id":"overlay_text_color","label":"Overlay text","default":"#FFFFFF"},
    {"type":"header","content":"Header"},
    {"type":"select","id":"header_alignment","label":"Alignment","options":[{"value":"left","label":"Left"},{"value":"center","label":"Center"}],"default":"center"},
    {"type":"text","id":"tag","label":"Tag","default":"Follow Along"},
    {"type":"color","id":"tag_color","label":"Tag color","default":"#E85D75"},
    {"type":"range","id":"tag_size","label":"Tag size","min":16,"max":32,"step":2,"default":22,"unit":"px"},
    {"type":"text","id":"heading","label":"Heading","default":"@emersonbyavery"},
    {"type":"color","id":"heading_color","label":"Heading color","default":"#1F1A14"},
    {"type":"range","id":"heading_size_desktop","label":"Heading ‚Äî Desktop","min":28,"max":72,"step":4,"default":48,"unit":"px"},
    {"type":"range","id":"heading_size_mobile","label":"Heading ‚Äî Mobile","min":24,"max":48,"step":4,"default":32,"unit":"px"},
    {"type":"textarea","id":"subheading","label":"Subheading","default":"Join our community"},
    {"type":"color","id":"subtitle_color","label":"Subtitle color","default":"#756758"},
    {"type":"range","id":"subtitle_size","label":"Subtitle size","min":14,"max":22,"step":2,"default":18,"unit":"px"},
    {"type":"header","content":"Cards"},
    {"type":"range","id":"card_border_radius","label":"Radius","min":0,"max":24,"step":4,"default":12,"unit":"px"},
    {"type":"header","content":"Instagram"},
    {"type":"url","id":"instagram_url","label":"Profile URL"},
    {"type":"checkbox","id":"show_follow_button","label":"Show button","default":true},
    {"type":"text","id":"follow_button_text","label":"Button text","default":"Follow Us"}
  ],
  "blocks":[
    {"type":"image","name":"Image","settings":[
      {"type":"image_picker","id":"image","label":"Image"},
      {"type":"text","id":"placeholder_emoji","label":"Placeholder","default":"üé®"},
      {"type":"url","id":"link","label":"Link"}
    ]}
  ],
  "presets":[{"name":"üì∏ Instagram","blocks":[
    {"type":"image","settings":{"placeholder_emoji":"üé®"}},
    {"type":"image","settings":{"placeholder_emoji":"üåà"}},
    {"type":"image","settings":{"placeholder_emoji":"ü¶ã"}},
    {"type":"image","settings":{"placeholder_emoji":"üíñ"}},
    {"type":"image","settings":{"placeholder_emoji":"üå∏"}},
    {"type":"image","settings":{"placeholder_emoji":"‚≠ê"}}
  ]}]
}
{% endschema %}
{% comment %}
  EMERSON BY AVERY ‚Äî WHY EMERSON SECTION
  "Because art should feel alive ‚Äî and shared."
{% endcomment %}

{{ 'section-avery-why.css' | asset_url | stylesheet_tag }}

<section class="avery-why">
  <div class="avery-why__container">
    
    {% if section.settings.tag != blank %}
      <span class="avery-why__tag">{{ section.settings.tag }}</span>
    {% endif %}
    
    {% if section.settings.title != blank %}
      <h2 class="avery-why__title">{{ section.settings.title }}</h2>
    {% endif %}
    
    {% if section.settings.subtitle != blank %}
      <p class="avery-why__subtitle">{{ section.settings.subtitle }}</p>
    {% endif %}
    
    {% if section.settings.text != blank %}
      <p class="avery-why__text">{{ section.settings.text }}</p>
    {% endif %}
    
    <!-- Product Categories -->
    <div class="avery-why__products">
      {% for block in section.blocks %}
        {% if block.type == 'product_category' %}
          <a href="{{ block.settings.link }}" class="avery-why__product" {{ block.shopify_attributes }}>
            <div class="avery-why__product-icon">
              {{ block.settings.icon }}
            </div>
            <span class="avery-why__product-name">{{ block.settings.name }}</span>
          </a>
        {% endif %}
      {% endfor %}
    </div>
    
    {% if section.settings.button_label != blank %}
      <a href="{{ section.settings.button_link }}" class="avery-why__btn">
        {{ section.settings.button_label }}
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    {% endif %}
    
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const section = document.querySelector('.avery-why');
    if (!section) return;
    
    const products = section.querySelectorAll('.avery-why__product');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('avery-why__product--visible');
        }
      });
    }, { threshold: 0.2 });
    
    products.forEach((product, index) => {
      product.style.setProperty('--delay', `${index * 0.1}s`);
      observer.observe(product);
    });
  });
</script>

{% schema %}
{
  "name": "Avery Why",
  "tag": "section",
  "class": "avery-why-section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "tag",
      "label": "Tag",
      "default": "Our Mission"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Why Emerson by Avery?"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Because art should feel alive ‚Äî and shared."
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Description",
      "default": "Each product in our shop brings a piece of Avery's world into yours. From fine art prints to playful onesies, we hope these designs make you smile, spark conversations, and brighten someone's day."
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "Explore Products"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    }
  ],
  "blocks": [
    {
      "type": "product_category",
      "name": "Product Category",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon",
          "default": "üñºÔ∏è"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "default": "Art Prints"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Avery Why",
      "blocks": [
        {
          "type": "product_category",
          "settings": { "icon": "üñºÔ∏è", "name": "Art Prints" }
        },
        {
          "type": "product_category",
          "settings": { "icon": "üíå", "name": "Note Cards" }
        },
        {
          "type": "product_category",
          "settings": { "icon": "üëï", "name": "Apparel" }
        },
        {
          "type": "product_category",
          "settings": { "icon": "üëú", "name": "Tote Bags" }
        },
        {
          "type": "product_category",
          "settings": { "icon": "üéÅ", "name": "Gifts" }
        }
      ]
    }
  ]
}
{% endschema %}
